(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-957dee76"],{"66cf":function(t,e,a){},a410:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-paper select-control"},[a("Form",{attrs:{"label-width":80}},[a("Row",[a("Col",{attrs:{span:"4"}},[t.item?a("Select",{attrs:{size:"large",remote:"",label:t.initLabel},on:{"on-change":t.handleSelectChange},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("Option",{attrs:{value:"all"}},[t._v("全部能力")]),t._l(t.item.products,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.label))])}))],2):t._e()],1),a("Col",{staticStyle:{width:"400px","text-align":"center"},attrs:{span:"8",offset:"1"}},[a("RadioGroup",{staticStyle:{width:"100%"},attrs:{type:"button",size:"large"},on:{"on-change":t.dateRadioChange},model:{value:t.dateRadio,callback:function(e){t.dateRadio=e},expression:"dateRadio"}},[a("Radio",{staticStyle:{width:"25%"},attrs:{label:"今天"}},[t._v("今天")]),a("Radio",{staticStyle:{width:"25%"},attrs:{label:"昨天"}},[t._v("昨天")]),a("Radio",{staticStyle:{width:"25%"},attrs:{label:"近7天"}},[t._v("近7天")]),a("Radio",{staticStyle:{width:"25%"},attrs:{label:"近30天"}},[t._v("近30天")])],1)],1),a("Col",{attrs:{span:"6",offset:"1"}},[a("DatePicker",{attrs:{size:"large",value:t.datePicker,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-end",placeholder:"选择日期",options:t.datePickerOption},on:{"on-change":function(e){return t.datePickerChange(e)}}})],1)],1)],1)],1),"all"==t.select?a("div",{staticClass:"sec api-overview is-normal"},[t.loading1?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._m(0),a("div",{staticClass:"sec-content"},[a("div",{staticClass:"main"},[a("table",{staticClass:"ui-table"},[t._m(1),a("tbody",{staticClass:"ui-table__body"},t._l(t.tableList.slice(10*t.currentPage-10,10*t.currentPage),(function(e,i){return a("tr",{key:i,staticClass:"ui-table__row ui-table__row_border"},[a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.productName))]),a("td",{staticClass:"ui-table__cell"},[t._v(" "+t._s(e.productName)+" ")]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.success+e.fail))]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.fail))]),a("td",{staticClass:"ui-table__cell"},[t._v(" "+t._s((e.fail/(e.success+e.fail)*100).toFixed(2)+"%")+" ")]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.cost))])])})),0)]),a("div",{staticClass:"table-pagination"},[a("div",{staticClass:"ui-pagination"},[a("div",{staticClass:"ui-pagination__cont"},[a("div",{staticClass:"ui-pagination__arrow",on:{click:function(e){return t.changeCurrentPage(-1)}}},[a("div",{staticClass:"ui-pagination__left"})]),a("div",{staticClass:"ui-pagination__text"},[t._v(" "+t._s(t.currentPage)+" / "+t._s(t.pageCount)+" ")]),a("div",{staticClass:"ui-pagination__arrow",on:{click:function(e){return t.changeCurrentPage(1)}}},[a("div",{staticClass:"ui-pagination__right"})])])])])])])],1):a("div",[a("div",{staticClass:"sec api-overview is-normal"},[t.loading1?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._m(2),a("div",{staticClass:"sec-content"},[a("div",{staticClass:"main"},[a("table",{staticClass:"ui-table"},[t._m(3),a("tbody",{staticClass:"ui-table__body"},t._l(t.tableList.slice(10*t.currentPage-10,10*t.currentPage),(function(e,i){return a("tr",{key:i,staticClass:"ui-table__row ui-table__row_border"},[a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.productName))]),a("td",{staticClass:"ui-table__cell"},[t._v(" "+t._s(e.productName)+" ")]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.success+e.fail))]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.fail))]),a("td",{staticClass:"ui-table__cell"},[t._v(" "+t._s((e.fail/(e.success+e.fail)*100).toFixed(2)+"%")+" ")]),a("td",{staticClass:"ui-table__cell"},[t._v(t._s(e.cost))])])})),0)]),a("div",{staticClass:"table-pagination"},[a("div",{staticClass:"ui-pagination"},[a("div",{staticClass:"ui-pagination__cont"},[a("div",{staticClass:"ui-pagination__arrow",on:{click:function(e){return t.changeCurrentPage(-1)}}},[a("div",{staticClass:"ui-pagination__left"})]),a("div",{staticClass:"ui-pagination__text"},[t._v(" "+t._s(t.currentPage)+" / "+t._s(t.pageCount)+" ")]),a("div",{staticClass:"ui-pagination__arrow",on:{click:function(e){return t.changeCurrentPage(1)}}},[a("div",{staticClass:"ui-pagination__right"})])])])])])])],1),a("div",{staticClass:"sec invoke-count"},[t.loading2?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._m(4),a("div",{staticClass:"sec-content"},[a("div",{staticClass:"invoke-count__line"},[a("chart",{attrs:{chartId:"numChart",xData:t.dateArray,itemData:t.numArray,series:t.numSeries,legend:t.numLegend}})],1)])],1),a("div",{staticClass:"sec invoke-time"},[t.loading2?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._m(5),a("div",{staticClass:"sec-content"},[a("div",{staticClass:"invoke-time__line"},[a("chart",{attrs:{chartId:"costChart",xData:t.dateArray,itemData:t.costArray,series:t.costSeries}})],1)])],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sec-header"},[a("div",{staticClass:"sec-header__title"},[t._v("能力运行概况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"ui-table__head"},[a("tr",{staticClass:"ui-table__row"},[a("td",{staticClass:"ui-table__cell"},[t._v("能力")]),a("td",{staticClass:"ui-table__cell"},[t._v("API")]),a("td",{staticClass:"ui-table__cell"},[t._v("调用量")]),a("td",{staticClass:"ui-table__cell"},[t._v("失败次数")]),a("td",{staticClass:"ui-table__cell"},[t._v("失败率")]),a("td",{staticClass:"ui-table__cell"},[t._v("耗时（ms）")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sec-header"},[a("div",{staticClass:"sec-header__title"},[t._v("能力运行概况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"ui-table__head"},[a("tr",{staticClass:"ui-table__row"},[a("td",{staticClass:"ui-table__cell"},[t._v("能力")]),a("td",{staticClass:"ui-table__cell"},[t._v("API")]),a("td",{staticClass:"ui-table__cell"},[t._v("调用量")]),a("td",{staticClass:"ui-table__cell"},[t._v("失败次数")]),a("td",{staticClass:"ui-table__cell"},[t._v("失败率")]),a("td",{staticClass:"ui-table__cell"},[t._v("耗时（ms）")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sec-header"},[a("div",{staticClass:"sec-header__title"},[t._v("调用次数")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sec-header"},[a("div",{staticClass:"sec-header__title"},[t._v("调用耗时(ms)")])])}],l=(a("a4d3"),a("4de4"),a("4160"),a("0d03"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("e25e"),a("159b"),a("2fa7")),c=a("365c"),r=a("2f62"),n=a("0ab9"),o=a("e9b1");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"",components:{chart:o["a"]},data:function(){return{index:0,item:{},select:"",initLabel:"",dateRadio:"近30天",datePicker:[n["a"].format(new Date((new Date).getTime()-25056e5),"yyyy-MM-dd"),n["a"].format(new Date,"yyyy-MM-dd")],datePickerOption:{disabledDate:function(t){return t&&t.valueOf()>Date.now()}},numLegend:{bottom:0,itemGap:25,itemWidth:20,itemHeight:20,data:[{name:"总次数",icon:"circle"},{name:"成功次数",icon:"circle"},{name:"失败次数",icon:"circle"}]},numArray:{all:[],success:[],fail:[]},costArray:[],tableList:[],currentPage:1,pageCount:1,loading1:!1,loading2:!1}},computed:u({},Object(r["d"])(["appList"]),{dateArray:function(){return n["a"].getDateArray(this.datePicker[0],this.datePicker[1],864e5,"yyyy-MM-dd")},numSeries:function(){var t=[{name:"总次数",data:this.numArray.all,type:"line",color:"#036bc8",symbolSize:6},{name:"成功次数",data:this.numArray.success,type:"line",color:"#4cb050",symbolSize:6},{name:"失败次数",data:this.numArray.fail,type:"line",color:"#4bc0c0",symbolSize:6}];return t},costSeries:function(){var t=[{name:"调用耗时",data:this.costArray,type:"line",color:"#036bc8",symbolSize:6}];return t}}),watch:{appList:function(t,e){if(this.index=this.$route.query.index,this.item=this.appList[this.index],this.select=this.$route.query.id,this.item)for(var a=0;a<this.item.products.length;a++)this.item.products[a].id==this.select&&(this.initLabel=this.item.products[a].label);this.getTableData(),this.getChartData()}},mounted:function(){this.index=this.$route.query.index,this.item=this.appList[this.index],this.select=this.$route.query.id;for(var t=0;t<this.item.products.length;t++)this.item.products[t].id==this.select&&(this.initLabel=this.item.products[t].label);this.getTableData(),this.getChartData()},methods:{dateRadioChange:function(){if(console.log(this.dateRadio),"今天"==this.dateRadio){var t=new Date,e=new Date;this.datePicker=[n["a"].format(e,"yyyy-MM-dd"),n["a"].format(t,"yyyy-MM-dd")],this.currentPage=1,this.getTableData(),this.getChartData()}else if("昨天"==this.dateRadio){var a=new Date,i=new Date;a.setTime(i.getTime()-864e5),i.setTime(i.getTime()-864e5),this.datePicker=[n["a"].format(i,"yyyy-MM-dd"),n["a"].format(a,"yyyy-MM-dd")],this.currentPage=1,this.getTableData(),this.getChartData()}else if("近7天"==this.dateRadio){var s=new Date,l=new Date;l.setTime(l.getTime()-5184e5),this.datePicker=[n["a"].format(l,"yyyy-MM-dd"),n["a"].format(s,"yyyy-MM-dd")],this.currentPage=1,this.getTableData(),this.getChartData()}else if("近30天"==this.dateRadio){var c=new Date,r=new Date;r.setTime(r.getTime()-25056e5),this.datePicker=[n["a"].format(r,"yyyy-MM-dd"),n["a"].format(c,"yyyy-MM-dd")],this.currentPage=1,this.getTableData(),this.getChartData()}},datePickerChange:function(t){this.datePicker=t,this.dateRadio="",this.currentPage=1,this.getTableData(),this.getChartData()},handleSelectChange:function(){this.currentPage=1,this.getTableData(),this.getChartData()},getChartData:function(){var t=this,e={productId:this.select,startDate:this.datePicker[0],endDate:this.datePicker[1]};"all"==this.select&&delete e.productId,this.loading2=!0,Object(c["f"])(this.item.id,e).then((function(e){if(e.success){for(var a=[],i=[],s=[],l=[],c=0;c<e.result.total.length;c++)a.push(e.result.cost[c].count),i.push(e.result.total[c].count),s.push(e.result.success[c].count),l.push(e.result.fail[c].count);t.numArray.all=i,t.numArray.success=s,t.numArray.fail=l,t.costArray=a}})).finally((function(){t.loading2=!1}))},getTableData:function(){var t=this,e={productId:this.select,startDate:this.datePicker[0],endDate:this.datePicker[1]};"all"==this.select&&delete e.productId,this.loading1=!0,Object(c["i"])(this.item.id,e).then((function(e){e.success&&(t.tableList=e.result,t.pageCount=parseInt(t.tableList.length/10)+1)})).finally((function(){t.loading1=!1}))},changeCurrentPage:function(t){t<0&&this.currentPage+t>=1?this.currentPage=this.currentPage+t:t>0&&this.currentPage+t<=this.pageCount&&(this.currentPage=this.currentPage+t)}}},h=_,g=(a("f8cf"),a("2877")),b=Object(g["a"])(h,i,s,!1,null,"6f54ef7a",null);e["default"]=b.exports},f8cf:function(t,e,a){"use strict";var i=a("66cf"),s=a.n(i);s.a}}]);